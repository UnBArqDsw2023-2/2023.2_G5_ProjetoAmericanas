# Documento de arquitetura de software

## 1. Introdução

## 2. Visão de Dados

&emsp;&emsp;   A perspectiva da Visão de Dados se focaliza na estrutura e organização dos dados persistentes empregados pelo sistema, delineando a forma como os dados são armazenados, acessados e manipulados, abrangendo entidades de dados, seus atributos e interconexões.

###  Modelo Entidade-Relacionamento (ME-R)

&emsp;&emsp;A abordagem do Modelo Entidade-Relacionamento (MER) constitui um tipo de modelo de dados aplicado para representar a estrutura e as relações entre as entidades de um sistema. Este modelo proporciona uma representação das entidades, seus atributos e as conexões entre elas.

&emsp;&emsp;No contexto do modelo Entidade-Relacionamento, as entidades são simbolizadas por retângulos, enquanto os relacionamentos são representados por linhas que conectam essas entidades. Cada entidade detém atributos que especificam suas características particulares. A seguir, apresentamos o nosso modelo, que foi elaborado utilizando a ferramenta [brModelo](http://www.sis4.com/brModelo/index.html).

### Entidades

- USUARIO
- ENDERECO_USUARIO
- PEDIDO
- PRODUTO
- ENDERECO
- AVALIACAO

### Descrição das Entidades

- USUARIO ( <span style="text-decoration: underline;">id_usuario</span>, telefone ,name, email, apelido, cpf, data_nascimento, senha, dt_criacao  )
- ENDERECO_USUARIO ( <span style="text-decoration: underline;">id_usuario</span>, id_endereco, endereco_padrao , dt_criacao)
- PEDIDO (<span style="text-decoration: underline;">id_pedido</span>, reputation, data_pedido, status_pedido, detalhes_pedido, preco_total, quantidade, estoque, dt_criacao)
- PRODUTO ( <span style="text-decoration: underline;">id_produto</span>, categoria, nome, tipo, preco, desconto, dt_criacao)
- ENDERECO (<span style="text-decoration: underline;">id_produto</span>, rua, cidade, cep, complemento, numero, estado, dt_criacao)
- AVALIACAO(<span style="text-decoration: underline;">id_avaliacao</span>, id_avaliacao, titulo_avalicao, comentario_avaliacao, dt_criacao)

### Descrição dos relacionamentos

- PRODUTO **- tem -** AVALIACAO <br>

  Um PRODUTO pode ter nenhuma ou várias AVALIACAOs, e uma AVALIACAO pertence a um único  PRODUTO.

  Cardinalidade: **(1:n)**

- USUARIO **- possui -** ENDERECO_USUARIO<br>
  Um USUARIO possui um ou mais ENDERECO_USUARIOs, e um ENDERECO_USUARIO pertence a um único USUARIO.

  Cardinalidade: **(1:n)**

- USUARIO **- faz-** PEDIDO<br>
  Um USUARIO pode fazer nenhum ou vários PEDIDOs, mas um PEDIDO pertence a um único USUARIO.

  Cardinalidade: **(1:n)**

- ENDERECO_USUARIO **- contem -** ENDERECO <br>
    Um ENDERECO_USUARIO pode conter um ENDERECO, e um ENDERECO pertence a nenhum ou vários ENDERECO_USUARIO.

    Cardinalidade: **(n:1)**

- PEDIDO **- contem -** PRODUTO<br>
  Um PEDIDO pode contem nenhum ou vários PRODUTOs, e um PRODUTO pode ser de um ou vários PEDIDOs.
  
  Cardinalidade: **(n:m)**


### 2.1 Diagrama Entidade-Relacionamento (DE-R)

<div align="center">

![Diagrama Entidade-Relacionamento](../img/DER_novo.jpeg)

</div>

<figcaption align='center'>
    <b>Figura ...: Diagrama Entidade-Relacionamento (DE-R)</b>
    <br><small>Fonte: Criação própria</small>
</figcaption> </center>

### 2.2 Diagrama Lógico de Dados (DLD)

<div align="center">

![Diagrama Lógico de Dados (DLD)](../img/logico_novo.jpeg)

</div>

<figcaption align='center'>
    <b>Figura ...: Diagrama Lógico de Dados (DLD)</b>
    <br><small>Fonte: Criação própria</small>
</figcaption> </center>

## 3. Visão de Casos de Uso

&emsp;&emsp;   Um modelo de caso de uso é um modelo que descreve como diferentes tipos de usuários interagem com o sistema para resolver um problema. Como tal, ele descreve as metas dos usuários, as interações entre os usuários e o sistema, bem como o comportamento necessário do sistema para satisfazer estas metas. Um modelo de caso de uso consiste em um conjunto de 
elementos de modelo. Os elementos de modelo mais importantes são: casos de uso, atores e as relações entre eles.

&emsp;&emsp;  Ao criar uma visão arquitetural de casos de uso, os arquitetos de software podem visualizar e comunicar de forma clara como o sistema irá atender às necessidades dos usuários, facilitando a tomada de decisões arquiteturais e o alinhamento entre os requisitos e o design do sistema.


### 3.1 Tabelas e diagrama de casos de uso

### Atores

| Número  |                       Ator                            |                   Descrição                                      | 
| :----:  | :---------------------------------------------------: | :--------------------------------------------------------------: | 
|    1    |                      Comprador	                      |  Usuário comprador de produtos e avaliador no site da Americanas |
|    2    |                      plataforma                       |  Usuário vendedor de produtos, sendo a própia plataforma         |

#### Tabela 1: Atores Caso de Uso
Fonte: Criação própria

### Tabela de itens

|  Código   |    Descrição       |    
|  :------: | :----------------: | 
|   US01    | Vende produto      |
|   US02    | Compra produto     |
|   US03    | Visualiza produto  |
|   US04    | Realiza avaliação  |
|   US05    | avaliação baixa    |
|   US06    | avaliação alta     |
|   US07    | realiza comentário |
|   US08    | visuliza avaliação |
|   US09    | filtra avaliações  |
|   US010   | avalia avaliações  |
|   US011   | realiza perguntas  |
|   US012   | responde perguntas |

#### Tabela 2: Código e Descrição
Fonte: Criação própria

### Tabela de dependências

|    Relação   |    Tipo   |    
|  :---------: | :-------: | 
|   US05xUS07  | INCLUD    |
|   US05xUS07  | EXTEND    |

### Diagrama de Caso de Uso

<div align="center">

![Diagrama Entidade-Relacionamento](../img/Caso-de-UsoAmericanas.png)

</div>

## 4. Visão de Implantação

Esta visão fornece uma visão geral de como o sistema deste projeto deve ser implantado. Também mostra os objetivos e as limitações relacionadas à implantação. 

Foi utilizada somente uma visão de implantação, suficiente para não deixar dúvidas quanto a como deve ser feito o “deploy” do sistema em questão. Tal visão é o diagrama UML de implantação. Mostra como as máquinas, as máquinas virtuais e os contêineres interagem entre si.

### 4.1 Objetivos e Limitações

As principais limitações foram de tempo e de dinheiro. O objetivo do time foi entregar o sistema funcionando dentro do prazo, garantindo a segurança de recursos computacionais e a privacidade das informações de usuários. No documento denominado ["Diagrama de Implantação"](https://unbarqdsw2023-2.github.io/2023.2_G5_ProjetoAmericanas/#/Modelagem/2.1.1.3.DiagramaDeComponentes), pode ser conferido com mais detalhes como foram escolhidas as tecnologias e os dispositivos utilizados, e também pode ser conferido quais fatores foram levados em conta nessas escolhas.

### 4.2 Relação com o diagrama de caso de uso da seção 3.1

Ao fazer uma avaliação, um usuário pode fazer o upload de texto e de imagens por meio do frontend (React). Tais requisições de upload são enviadas para o proxy reverso (Nginx), que encaminha para o backend (Django REST Framework). O backend, por sua vez, solicita o armazenamento de tais dados ao AWS S3 e ao servidor PostgreSQL. As imagens são armazenadas no AWS S3, uma referência a cada uma dessas imagens vai para o PostgreSQL, e os demais textos são armazenados no PostgreSQL.

### 4.3 Diagrama de Implantação

<br/>

![Diagrama de Implantação](../img/diagrama_de_implantacao.png)

<br/>


## . Histórico de versão

| Versão |                       Alteração                       |                   Responsável                   | Revisor | Data  |
| :----: | :---------------------------------------------------: | :---------------------------------------------: | :-----: | :---: |
|  1.0   |              Criação do documento e visão de dados    | Philipe de Sousa                                | Pedro   | 28/11 |
|  1.1   |              Ajuste nos diagramas DER e DLD           | Philipe de Sousa                          | Felipe Pereira| 28/11 |
|  2.0   |             Criação da Visões de Caso de uso          |       Silas Neres                               |          | 30/11|

##  Referências

> [1] Fakhroutdinov, K.: The Unified Modeling Language site,
Actions, 2009–2023. Disponível em: https://www.uml-diagrams.org/component-diagrams.html . Acesso em: 30 de Novembro de 2023.
